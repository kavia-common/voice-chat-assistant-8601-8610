{"is_source_file": true, "format": "Python", "description": "This file defines functions for interacting with the OpenAI chat completion API, including setting up a client with API key configuration and sending chat messages with context. It manages external dependencies on Django settings and the openai library.", "external_files": ["django.conf.settings", "openai"], "external_methods": ["settings.OPENAI_API_KEY", "settings.OPENAI_MODEL", "hasattr", "getattr"], "published": ["send_chat"], "classes": [], "methods": [{"name": "Optional[\"OpenAI\"] _openai_client()", "description": "Creates and returns an OpenAI client if API key is configured and the openai library is available.", "scope": "", "scopeKind": ""}, {"name": "str send_chat(message: str, context: str = \"\")", "description": "Sends a message to the OpenAI chat completion API and returns the reply; handles missing API key configuration gracefully.", "scope": "", "scopeKind": ""}], "calls": ["settings.OPENAI_API_KEY.strip", "hasattr(settings, \"OPENAI_API_KEY\")", "getattr(settings, \"OPENAI_MODEL\", \"gpt-4o-mini\")", "client.chat.completions.create", "hasattr(resp, \"choices\")", "getattr(resp.choices[0].message, \"content\", \"\")"], "search-terms": ["chat.py", "OpenAI", "send_chat", "chat completion", "API key configuration", "Django settings", "OpenAI client"], "state": 2, "file_id": 21, "knowledge_revision": 47, "git_revision": "", "ctags": [{"_type": "tag", "name": "OpenAI", "path": "/home/kavia/workspace/code-generation/voice-chat-assistant-8601-8610/voice_chat_backend/api/services/chat.py", "pattern": "/^    OpenAI = None  # type: ignore$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_openai_client", "path": "/home/kavia/workspace/code-generation/voice-chat-assistant-8601-8610/voice_chat_backend/api/services/chat.py", "pattern": "/^def _openai_client() -> Optional[\"OpenAI\"]:$/", "language": "Python", "typeref": "typename:Optional[\"OpenAI\"]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "send_chat", "path": "/home/kavia/workspace/code-generation/voice-chat-assistant-8601-8610/voice_chat_backend/api/services/chat.py", "pattern": "/^def send_chat(message: str, context: str = \"\") -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(message: str, context: str = \"\")"}], "hash": "d06223de4e589dc2b910582b1ad7434f", "format-version": 4, "code-base-name": "voice_chat_backend", "filename": "voice_chat_backend/api/services/chat.py", "fields": [{"name": "OpenAI = None  # type: ignore", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"47": ""}]}